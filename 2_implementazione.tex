\section{Progettazione e Implementazione}
\label{section:progettazione}


Per favorire un modello da studiare che permetta di risolvere gli obiettivi descritti 
pocanzi sono state prese le decisioni qui di seguito elencate.

Iniziamo con il dire che il social network verrà astratto ad un grafo scale-free dove ogni 
nodo è un utente che possiede alcune caratteristiche.

Per il primo obiettivo verrà posta l'attenzione su due algoritmi per la creazione di grafi che 
formano modelli di rete differenti.

Inizialmente verrà fatto vedere come una notizia viene propagata in un grafo di tipo 
``Preferential Attachment'' suggerito da Barabási e Albert~\cite{biblio:barabasilab_emergence}.

Le simulazioni poi proseguiranno con un altra topologia di grafo, sempre scale-free 
con Power Law Degree, descritta però dall'algoritmo di Dorogovtsev e Mendes~\cite{biblio:evolution_networks}.

Il lavoro non parte da dati reali e la scelta di queste topologie di grafi è data 
dalla peculiarità di alcune loro caratteristiche che elencherò qui di seguito:
\begin{itemize}
 \item La topologia di grafo Preferential Attachment:
 \begin{itemize}
  \item è un modello ampiamente utilizzato per la sua semplicità;
  \item è impiegato da buona parte di studi che trattano argomenti somiglianti lo ``Spreading Rumors'';
  \item non è un grafo di tipo frattale~\cite{biblio:fractal_resistant_disease} ma ha una caratteristica simile. 
 Non possedendo cricche di almeno 3 nodi, se un nodo non condivide la notizia, 
 tutti i suoi nodi ``figli'' non riceveranno mai l'informazione e perciò rimarranno per sempre ignoranti sulla notizia.
 \end{itemize}
 
 \item La topologia di grafo definita da Dorogovtsev e Mendes invece:
  \begin{itemize}
  \item ha un modello decisamente più complesso;
  \item può avere all'interno del grafo cricche da 3 o più nodi e questo permette una probabilità maggiore di condivisione della notizia;
  \item più somigliante\footnote{\scriptsize Non esiste un modello virtuale di una rete sociale reale. 
  Tutte le ottimizzazioni che vengono apportate sono per rendere i risultati di queste simulazioni più attinenti alla realtà.}
  ad una struttura reale di rete sociale.
 \end{itemize}
\end{itemize}

Cercando di migliorare il modello totale della simulazione è stato deciso di fornire alcune proprietà alla notizia e 
agli utenti(Nodi) che compaiono nella rete sociale.

Osservando il secondo obiettivo dobbiamo fornire alla notizia un ``argomento'' e per fare ciò si 
è optato per l'inserimento di $N$ valori che definiranno quanto è adatta la notizia per ogni fascia d'età.

Avendo a disposizione la distribuzione delle età, precedentemente mostrata nel grafico di figura~\ref{img:age_distribution_social},
possiamo notare 5 intervalli di anni e quindi stabilire il valore di $N = 5$.

Dobbiamo perciò anche definire 5 gruppi di utenti per distinguere le differenti età.
Il numero di persone appartenenti ad ogni gruppo verrà semplicemente definito dalla semplice proporzione:
\begin{equation*}
N\_NODI\_TOTALI \quad / \quad 100 \quad * \quad \%\_UTENTI\_GRUPPO
\end{equation*}
dove $\%\_UTENTI\_GRUPPO$ è la percentuale presente nel grafico di figura ~\ref{img:age_distribution_social}.

A questo punto per la condivisione dell'informazione tra nodo e nodo manca solamente la formula per definire la probabilità 
della propagazione.
Se dovessimo lasciare così le cose avremo un valore della notizia per cui il gruppo condivide ed un altro 
valore per cui non la condivide.
L'idea però è quella di dare la ``possibilità'' all'utente, come nella realtà, di decidere se la 
notizia gli interessa oppure no. 
Questo ci obbliga ad aggiungere un nuovo paramentro all'utente, l'astensione alla notizia.

Così facendo la notizia verrà condivisa dall'utente \emph{'i'} con una certa età \emph{'e'} se:
\begin{equation*}
\Rightarrow NOTIZIA_e \quad > \quad UTENTE_i.astensione
\end{equation*}
dove $\quad NOTIZIA_e \quad$ è la forza di condivisione della notizia su una data fascia d'età \emph{'e'}, 
mentre $\quad UTENTE_i.astensione \quad$ è l'astensione alla notizia dell'utente i-esimo.

L'ultimo obiettivo agisce proprio su quest'ultima parte appena definita.
Quando si parla di ``forza della notizia'' e di ``forza di astensione'' vogliamo considerare un numero tra 0 e 1.
Per avere una probabilità di condivisione più o meno alta andremo ad agire solo sulla ``forza di astensione''.
Per come abbiamo definito la formula della condivisione basterà che la distribuzione dell'astensione sia più 
tendente a 0 per avere una miglior condivisione, o viceversa, più tendente a 1 per avere una peggior
condivisione.

\subsection{Strumenti}


Dopo aver discusso di tutte le fasi della progettazione possiamo passare all'imple-mentazione.

Le simulazioni previste saranno sviluppate in NetLogo che fornisce un ambiente semplice e piuttosto 
personalizzabile dove si possono condurre studi in parecchi campi.
NetLogo è uno strumento di sviluppo per una programmazione basata ad agenti.
Nel lavoro qui presentato gli agenti in questione saranno gli utenti della rete sociale.

Esistono molti altri simulatori di reti che prevedono una programmazione ad agenti, ma NetLogo
ha risposto brillantemente alle esigenze implementative avendo una sintassi semplice e una moltitudine di
API~\cite{biblio:netlogo_dictionary} fornite dal linguaggio stesso.


\subsection{Topologie dei grafi}
\label{section:graph_topologies}


Come già annunciato all'inizio di questo capitolo i modelli di grafo che verranno studiati in questo lavoro
sono due.


\subsubsection{Preferential Attachment}
\label{section:graph_topologies_pa}
Il modello Preferential Attachment, come già comunicato a inizio capitolo, è altamente diffuso e conosciuto.
Tanto da avere una propria API per la creazione nel dizionario di NetLogo.

Invocando la funzione:
\begin{lstlisting}[label=some-code, style=custom_code]
 generate-preferential-attachment turtles links num-nodes
\end{lstlisting}

che risiede all'interno dell'estensione ``network'' verrà creato un grafo di num-nodes con le proprietà 
del grafo Preferential Attachment.\\
In figura \ref{img:preferential_attachment} è presente una rappresentazione grafica del grafo.

\begin{figure}[!ht]
 \centerline{
  \begin{subfigure}[b]{0.4\textwidth}
    \includegraphics[width=1.0\textwidth]{img/preferential-attachment-graph.eps}
    \caption{Preferential Attachment}
    \label{img:preferential_attachment}
  \end{subfigure}
  \qquad
  \qquad
  \qquad
  \begin{subfigure}[b]{0.4\textwidth}
    \includegraphics[width=1.0\textwidth]{img/dorogovtsev-mendes-graph.eps}
    \caption{Dorogovtsev e Mendes}
    \label{img:dorogovtsev_mendes}
  \end{subfigure}
 }
 \caption{Rappresentazione grafica delle due topologie di grafo studiate.}
 \label{img:graph_models}
\end{figure}

\subsubsection{Modello di Dorogovtsev e Mendes}
\label{section:graph_topologies_dm}

\begin{wrapfigure}{r}{0.33\textwidth}
  \vspace*{-25pt}
  \begin{center}
    \includegraphics[width=0.28\textwidth]{img/gui-graph.png}
  \end{center}
 \vspace*{-10pt}
 \caption{GUI: Creazione o importazione del grafo}
 \vspace*{-35pt}
 \label{img:gui_graph}
\end{wrapfigure}

Il modello definito da Dorogovtsev e Mendes viene implementato dalla libreria Java chiamata GraphStream~\cite{biblio:graphstream}.
La libreria è formata essenzialmente da tre parti: 
\begin{itemize}
 \item core: Il package principale di GraphStream;
 \item algo: Il package dove sono implementati tutti gli algoritmi e i generatori della libreria;
 \item ui: Il package che permette di visualizzare e dare un layout al grafo.
\end{itemize}
I grafi che verranno utilizzati nelle simulazioni sono stati creati da un'applicazione implementata appositamente.
Una volta creati vengono salvati su file in formato GraphML~\cite{biblio:graphml} per poter 
essere caricati dalla simulazione NetLogo. 
In figura \ref{img:dorogovtsev_mendes} è presente una rappresentazione grafica del grafo.



\subsection{Interfaccia grafica per la configurazione della rete}
\label{section:gui_setup_graph}

\begin{wrapfigure}{l}{0.33\textwidth}
  \vspace*{-35pt}
  \begin{center}
    \includegraphics[width=0.28\textwidth]{img/gui-main.png}
  \end{center}
 \vspace*{-10pt}
 \caption{GUI: 
 scelta del Social Netwoks;
 pulsante per il calcolo della distribuzione delle età;
 pulsante per l'inizializzazione dei nodi.}
 \vspace{-23 mm}
 \label{img:gui_main}
\end{wrapfigure}

Al fine di portare a termine gli obiettivi in precedenza descritti è stata creata una interfaccia grafica 
per permettere all'utilizzatore di interagire con il progetto.
Nella figura~\ref{img:gui_graph} e nella figura~\ref{img:gui_main} vengono mostrate due porzioni di GUI che servono 
all'inizializzazione delle simulazioni.
Nella maggior parte delle dimostrazioni di NetLogo è presente solo un pulsante ``Setup'' 
e un pulsante ``go''. Data la particolarità del progetto non è stato possibile semplicizzare a questo livello l'interfaccia grafica 
perciò, qui di seguito, verranno illustrate le caratteristiche principali.


In figura~\ref{img:gui_graph} si possono notare due pulsanti:
\begin{itemize}
 \item il primo serve per creare un grafo di tipo Preferential Attachment 
  (Sezione ~\ref{section:graph_topologies_pa}) con un numero \emph{num-nodes} di nodi.
 \item il secondo invece serve per importare un file GraphML (Sezione ~\ref{section:graph_topologies_dm}) tra 
  quelli già creati in precedenza.
\end{itemize}


Dopo aver creato o importato il grafo, viene cercato l'hub della rete, ovvero il nodo con il \emph{degree} più alto.

Un'altra fase necessaria è stata quella di importare nel progetto i dati di alcuni Social Netwoks
presenti nel grafico di figura~\ref{img:age_distribution_social}.

\begin{wrapfigure}{l}{0.33\textwidth}
  \vspace*{-20pt}
  \begin{center}
    \includegraphics[width=0.28\textwidth]{img/gui-news.png}
  \end{center}
 \vspace*{-10pt}
 \caption{GUI: 
 cursori per la definizione di una notizia.}
 \vspace*{-10pt}
 \label{img:gui_news}
\end{wrapfigure}
Sono stati inclusi solo i tre che vengono  mostrati in figura ~\ref{img:gui_main} per via della loro popolarità.
In alcune simulazioni esiste la necessità di creare condizioni particolari che non possono essere risolte con i dati 
di questi Social Netwoks.
Per rendere l'applicazione più generale possibile infatti sono stati implementati anche 5 cursori che permettono di far 
decidere all'utilizzatore dei parametri personalizzati.
Ognuno di questi cursori serve per impostare la percentuale di utenti facente parte della suddetta fascia d'età.
Per semplicità sono stati chiamati:\\``\%-<fascia età inizio>-<fascia età fine>''.

Si può vedere la loro implementazione nell'esempio in figura~\ref{img:gui_main} dove si nota che:
\begin{itemize}
 \item il gruppo formato dalle persone che hanno tra i 16 e i 24 anni sono il 30\%;
 \item quelle che hanno tra i 25 e i 34 anni sono il 25\%;
 \item quelle che hanno tra i 35 e i 44 anni sono il 15\%;
 \item quelle che hanno tra i 45 e i 54 anni sono il 20\%gruppo;
 \item quelle che hanno tra i 55 e i 64 anni sono il 10\%;
\end{itemize}



\begin{wrapfigure}{r}{0.40\textwidth}
  \vspace*{-20pt}
  \begin{center}
    \includegraphics[width=0.35\textwidth]{img/gui-first-second-test.png}
  \end{center}
 \vspace*{-10pt}
 \caption{GUI: 
 pulsanti per dare il via ai primi due test}
 \vspace*{-10pt}
 \label{img:gui_first_second_test}
\end{wrapfigure}
Per calcolare quanti utenti devono essere presenti per ogni intervallo di età bisogna premere il pulsante ''Setup Age Distribution``.
Il pulsante ''Setup Social Netwoks``, invece, serve a resettare i dati base degli utenti, riportando la simulazione 
allo stato iniziale, senza eliminare ne il grafo ne la distribuzione dell'età.
Per stato iniziale della simulazione si intende posizionare nell'hub la notizia, facendolo diventare uno ``Spreader''.
In tutti gli altri utenti del grafo verrà impostato lo stato ``Ignorant'' e sarà calcolato un nuovo valore di 
astensione alla notizia.

Sono presenti altri 5 cursori, mostrati in figura~\ref{img:gui_news}, che identificano l'intensità con cui la notizia è forte 
verso un certo gruppo di utenti. 
Viene definita come\\
``p-<fascia età inizio>-<fascia età fine>'' per indicare la probabilità di condivisione che ha sulla particolare
fascia d'età.
Nell'esempio in figura~\ref{img:gui_news} la probabilità nel primo gruppo vale 1.0, ovvero la condivisione avrà \emph{sempre} esito positivo.
In caso contrario nel quinto gruppo la probabilità è 0 perciò la condivisione avrà sempre esito negativo. 
Nei casi intermedi viene confrontato il valore di astensione dell'utente al valore del cursore dell'età dell'utente come è stato definito 
in fase di progettazione (Sezione ~\ref{section:progettazione}).















